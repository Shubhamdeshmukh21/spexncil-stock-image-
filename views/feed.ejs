<%- include('partials/header') %>

<div class="w-full px-2 sm:px-6 py-6 bg-zinc-800 min-h-screen text-white">

  <!-- Masonry container with responsive columns and spacing -->
  <div class="columns-1 sm:columns-2 md:columns-3 lg:columns-4 gap-x-4 gap-y-6">

    <% posts.forEach(post => { %>
      <a href="/post/<%= post._id %>" 
         class="inline-block w-full max-w-xs sm:max-w-none mb-6 bg-zinc-900 rounded-xl overflow-hidden shadow-md hover:scale-[1.02] transition-transform duration-200 break-inside-avoid">

        <% if (post.image && post.image.data) { %>
          <img
            src="data:<%= post.image.contentType %>;base64,<%= post.image.data.toString('base64') %>"
            alt="<%= post.title %>"
            class="w-full h-auto object-cover"
            loading="lazy"
          />
        <% } else { %>
          <div class="w-full h-40 bg-zinc-700 flex items-center justify-center text-white">No image</div>
        <% } %>

        <div class="p-3">
          <h3 class="text-base font-semibold mb-1"><%= post.title %></h3>
          <p class="text-sm text-zinc-400">By @<%= post.user.username %></p>
        </div>
      </a>
    <% }) %>

  </div>
</div>

<%- include('partials/footer') %>
